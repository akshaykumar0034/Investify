# =========================================
# ? Server Configuration
# =========================================
server.port=8080
spring.application.name=investify-backend

# =========================================
# ? PostgreSQL Database Configuration
# =========================================
spring.datasource.url=jdbc:postgresql://localhost:5432/investify_db
spring.datasource.username=postgres
spring.datasource.password=PASSWORD
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# =========================================
# ? JWT Token Settings
# =========================================
app.jwt.secret=API_KEY
app.jwt.expiration-ms=86400000
app.jwt.refresh-expiration-ms=604800000

# =========================================
# ? External Finance API (Finnhub)
# =========================================
finnhub.api.key=API_KEY
finnhub.api.baseurl=https://finnhub.io/api/v1

fmp.api.key=API_KEY
fmp.api.baseurl=https://financialmodelingprep.com/api/v3

alphavantage.api.key=ALPHAVANTAGE_API_KEY
alphavantage.api.baseurl=https://www.alphavantage.co

# =========================================
# ? Quartz Scheduler Configuration (FINAL FIX)
# =========================================

# Use JDBC-backed job store (persistent in PostgreSQL)
spring.quartz.job-store-type=jdbc

# Automatically initialize Quartz tables for PostgreSQL
spring.quartz.jdbc.initialize-schema=always

# Basic scheduler info
spring.quartz.properties.org.quartz.scheduler.instanceName=InvestifyScheduler
spring.quartz.properties.org.quartz.scheduler.instanceId=AUTO

# PostgreSQL-specific delegate (critical)
spring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate

# Transactional job store
spring.quartz.properties.org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX

# Use plain text for JobDataMap (avoids blob deserialization errors)
spring.quartz.properties.org.quartz.jobStore.useProperties=true

# DataSource binding for Quartz
spring.quartz.properties.org.quartz.jobStore.dataSource=myDataSource

# Define Quartz?s DB connection (uses same DB as app)
spring.quartz.properties.org.quartz.dataSource.myDataSource.driver=org.postgresql.Driver
spring.quartz.properties.org.quartz.dataSource.myDataSource.URL=jdbc:postgresql://localhost:5432/investify_db
spring.quartz.properties.org.quartz.dataSource.myDataSource.user=postgres
spring.quartz.properties.org.quartz.dataSource.myDataSource.password=PASSWORD
spring.quartz.properties.org.quartz.dataSource.myDataSource.maxConnections=5
spring.quartz.properties.org.quartz.dataSource.myDataSource.provider=hikaricp


# Thread pool configuration (optional tuning)
spring.quartz.properties.org.quartz.threadPool.threadCount=10
spring.quartz.properties.org.quartz.threadPool.threadPriority=5

# ? AI API (Google Gemini via Spring AI)
# =========================================
spring.ai.google.api-key=GOOGLE_API_KEY
spring.ai.google.genai.chat.options.model=gemini-2.5-flash

# =========================================
# ? API Documentation (Swagger / SpringDoc)
# =========================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
